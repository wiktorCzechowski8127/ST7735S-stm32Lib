<h1>Display library ver 1.1 </h1>
<h2>Overview </h2>
Stm32 library for TFT display with ST7735S chip. Project beasd on Hardware Agnostic Graphics Library (https://github.com/tuupola/hagl/tree/master) and Forbot stm32 course (https://forbot.pl/blog/kurs-stm32l4-kolorowy-wyswietlacz-tft-spi-id48620). Library have few additional options and functions.

<h2>Aditional functions</h2>

<h4>current version:</h4>

- new characters generation procedure based on Squix78' OLED SD1306 screen library V3 font format, which allows to use custom fonts
- text rotation
- transparent background of characters
- init function with pointer to SPI structure
- background color
- one dir to attatch

<h2>Example</h2>


<img src="https://github.com/wiktorCzechowski8127/ST7735S-stm32Lib/blob/main/img/rotation1_1.png" width="400" height="300" align="left">

<img src="https://github.com/wiktorCzechowski8127/ST7735S-stm32Lib/blob/main/img/fonts1_1.png" width="400" height="300">

<h2>How to add new font</h2>

<h4>1. Font bitmap generation </h4>
Fonts can be generated here: https://oleddisplay.squix.ch/ (Library Version: >- 3.0.0) or made on your own here: https://dagnall53.github.io/Fonts-for-WiRocs/glyphEditor2.html

Generated code should be paste in newly created header file. User have to change param type to uint16_t to ensure compatibility bigger fonts and delete "PROGMEM" from param declaration.

__Example:__

Wrong (generated by default) format:
```
const char Dialog_plain_15[] PROGMEM =
```
Correct format:
```
const uint16_t fontDialog15[] = 
```

<h4>2. Including font file</h4>

File with font should be included in place where <i>hagl_put_text()</i> or <i>hagl_put_char()</i> will be used:
```
#include "../../ST7735S_files/include/fontDialog15.h"
```
<h4>3. Text generation</h4>

Use font param name as input parameter in <i>hagl_put_text()</i> or <i>hagl_put_char()</i> 

__Example:__

```
hagl_put_text("text to print", x, y, color, fontDialog15, rotation);
```


By default library contains 3 fonts:
- Dialog 15x18 - include/fontDialog15.h
- Roboto 22x28 - include/fontRoboto23.h
- Dialog 48x57 - include/fontDialog48.h
<h2>Manual</h2>

<h3>- Initialization</h3>

Display initialization function

__Syntax:__

```
void lcd_init(SPI_HandleTypeDef* spiHandler);
```
__Parameters:__

| Arg                | Desc                           |
|--------------------|--------------------------------|
| SPI_HandleTypeDef* | Pointer to used SPI structure. |

__Example:__
```
lcd_init(&hspi1);
```

---

<h3>- Printing buffer on display</h3>

Drawing the finished frame

__Syntax/Example:__

```
lcd_print();
```

---

<h3>- Backgoround color</h3>

Fill all display with choosen color

__Syntax:__

```
hagl_set_bg_color(color_t color);
```

__Parameters:__

| Arg                | Desc                           |
|--------------------|--------------------------------|
| color_t            | Color in RGB565 format         |

__Example:__
```
hagl_set_bg_color(0xffc0);
```

---

<h3>- Printing text</h3>

Printing text to buffer.

__Syntax:__

```
uint16_t hagl_put_text(const wchar_t *str, int16_t x0, int16_t y0, color_t color, const unsigned char *font, uint8_t rotation);
```

__Parameters:__

| Arg      |   Desc                                                                        |
|----------|-------------------------------------------------------------------------------|
| *str     | Text to print. Couse wchar type need to add L before string                   |
| x0       | X pos on display.                                                             |
| y0       | Y pos on display                                                              |
| color    | Color of text in RGB565 type.                                                  |
| font     | Pointer to font. Avaible fonts: 5x7, 5x8, 6x9. Font header file should be included before use. |
| rotation | Avaible rotation: ROTATION_NONE, ROTATION_RIGHT, ROTATION_LEFT, ROTATION_FLIP.  |

__Example:__

```
hagl_put_text(L"default text", 0, 0, YELLOW, font6x9, ROTATION_NONE, 2);
```

---
<h3>- Geometric shapes</h3>
Functions to draw geometric shapes are described in the hagl documentation: https://github.com/tuupola/hagl/tree/master

---
<h3>- Archival versions</h3>

version 1.0: https://github.com/wiktorCzechowski8127/ST7735S-stm32Lib/tree/ce017aba59add96eb461191b63d30faaf6ccb222




